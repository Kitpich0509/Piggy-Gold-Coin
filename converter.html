<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Currency Converter ‚Äî Live Ticker</title>
    <link rel="icon" href="E85DBBA7-4F9D-40AD-888F-F5CA98C83011.png" type="image/png" />
 <style>
:root{
  --brand:#2193b0;
  --card:#fff;
  --bg1:#2193b0;
  --bg2:#6dd5ed;
}

html, body {
  margin: 0;
  padding: 0;
  font-family:'Segoe UI',Tahoma,Arial;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem 1rem;
  box-sizing: border-box;
}

.container {
  width: 100%;
  max-width: 480px;
  background: var(--card);
  border-radius: 18px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.18);
  padding: 22px;
  box-sizing: border-box;
  text-align: center;
}

h1 {
  margin: 6px 0 12px;
  color: var(--brand);
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.ticker-wrapper {
  width:100%;
  overflow:hidden;
  white-space:nowrap;
  margin:6px 0 18px;
  padding:8px 6px;
  border-radius:10px;
  background:linear-gradient(90deg, rgba(33,147,176,0.06), rgba(109,213,237,0.04));
  border:1px solid rgba(33,147,176,0.08);
}

.ticker {
  display:inline-block;
  padding-left:100%;
  animation: scroll-left 12s linear infinite;
  font-weight:600;
  color:#0f4a57;
  font-size:14px;
}

@keyframes scroll-left {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-100%); }
}

.live-dot {
  display:inline-block;
  width:12px;height:12px;border-radius:50%;
  margin-left:8px;
  vertical-align:middle;
  background:#2ecc71;
  box-shadow:0 0 6px rgba(46,204,113,0.9);
  animation: pulse 1.4s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); opacity:1; }
  50% { transform: scale(1.3); opacity:0.7; }
  100% { transform: scale(1); opacity:1; }
}

.form {
  text-align:left;
  gap:12px;
  display:grid;
  grid-template-columns:1fr;
}

label { font-size:13px;color:#333;font-weight:700;margin-bottom:6px; display:block; }
input, select {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #e6eef2;
  font-size:15px;
  box-sizing:border-box;
}

input:focus, select:focus { border-color:var(--brand); box-shadow:0 4px 12px rgba(33,147,176,0.06); }

.btn {
  margin-top:12px;
  width:100%;
  padding:12px;
  background:var(--brand);
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
  font-weight:700;
}

.result {
  margin-top:14px;
  font-size:18px;
  font-weight:800;
  text-align:center;
  color:#0b3b43;
  padding:10px;
  border-radius:10px;
  background:#f3fdff;
  border:1px dashed rgba(33,147,176,0.12);
}

.ads-container {
  width: 100%;
  max-width: 480px;
  margin-top: 16px;
  padding: 12px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  text-align: center;
  font-weight: 700;
  color: #2193b0;
  font-size: 16px;
}

@media (max-width:420px){
  .ticker { font-size:13px; animation-duration:14s; }
  h1 { font-size:20px; }
}
</style>
</head>
<body>
  <div class="container">
    <h1>üí± Currency Converter</h1>

    <!-- Running sentence / ticker under H1 -->
    <div class="ticker-wrapper" aria-hidden="false">
      <div id="ticker" class="ticker">
        Loading live exchange rate... <span class="live-dot" id="liveDot"></span>
      </div>
    </div>

    <!-- Converter form -->
    <div class="form">
      <div>
        <label for="amount">Amount</label>
        <input id="amount" type="number" placeholder="e.g. 100" value="100" />
      </div>

      <div>
        <label for="from">From</label>
        <select id="from"></select>
      </div>

      <div>
        <label for="to">To</label>
        <select id="to"></select>
      </div>

      <button class="btn" id="convertBtn">üîÑ Convert</button>

      <div id="result" class="result">Result will appear here</div>
    </div>
  </br>
<script async="async" data-cfasync="false" src="//pl27178605.revenuecpmgate.com/6ce741fdce53e6f494dfb3616fb300da/invoke.js"></script>
<div id="container-6ce741fdce53e6f494dfb3616fb300da"></div>
  </div>

  <div class="ads-container">
  <p>üî• Your Ad Here! üî•</p>
  <script async="async" data-cfasync="false" src="//pl27178605.revenuecpmgate.com/6ce741fdce53e6f494dfb3616fb300da/invoke.js"></script>
  <div id="container-6ce741fdce53e6f494dfb3616fb300da"></div>
</div>

  <script>
const currencyFlags = {
  AED: "üá¶üá™ (AED)",
  AFN: "üá¶üá´ (AFN)",
  ALL: "üá¶üá± (ALL)",
  AMD: "üá¶üá≤ (AMD)",
  ANG: "üáßüá∂ (ANG)",
  AOA: "üá¶üá¥ (AOA)",
  ARS: "üá¶üá∑ (ARS)",
  AUD: "üá¶üá∫ (AUD)",
  AWG: "üá¶üáº (AWG)",
  AZN: "üá¶üáø (AZN)",
  BAM: "üáßüá¶ (BAM)",
  BBD: "üáßüáß (BBD)",
  BDT: "üáßüá© (BDT)",
  BGN: "üáßüá¨ (BGN)",
  BHD: "üáßüá≠ (BHD)",
  BMD: "üáßüá≤ (BMD)",
  BND: "üáßüá≥ (BND)",
  BOB: "üáßüá¥ (BOB)",
  BRL: "üáßüá∑ (BRL)",
  BSD: "üáßüá∏ (BSD)",
  BTN: "üáßüáπ (BTN)",
  BWP: "üáßüáº (BWP)",
  BYN: "üáßüáæ (BYN)",
  BZD: "üáßüáø (BZD)",
  CAD: "üá®üá¶ (CAD)",
  CDF: "üá®üá© (CDF)",
  CHF: "üá®üá≠ (CHF)",
  CLP: "üá®üá± (CLP)",
  CNY: "üá®üá≥ (CNY)",
  COP: "üá®üá¥ (COP)",
  CRC: "üá®üá∑ (CRC)",
  CUP: "üá®üá∫ (CUP)",
  CVE: "üá®üáª (CVE)",
  CZK: "üá®üáø (CZK)",
  DJF: "üá©üáØ (DJF)",
  DKK: "üá©üá∞ (DKK)",
  DOP: "üá©üá¥ (DOP)",
  DZD: "üá©üáø (DZD)",
  EGP: "üá™üá¨ (EGP)",
  ERN: "üá™üá∑ (ERN)",
  ETB: "üá™üáπ (ETB)",
  EUR: "üá™üá∫ (EUR)",
  FJD: "üá´üáØ (FJD)",
  FKP: "üá´üá∞ (FKP)",
  GBP: "üá¨üáß (GBP)",
  GEL: "üá¨üá™ (GEL)",
  GHS: "üá¨üá≠ (GHS)",
  GIP: "üá¨üáÆ (GIP)",
  GMD: "üá¨üá≤ (GMD)",
  GNF: "üá¨üá≥ (GNF)",
  GTQ: "üá¨üáπ (GTQ)",
  GYD: "üá¨üáæ (GYD)",
  HKD: "üá≠üá∞ (HKD)",
  HNL: "üá≠üá≥ (HNL)",
  HRK: "üá≠üá∑ (HRK)",
  HTG: "üá≠üáπ (HTG)",
  HUF: "üá≠üá∫ (HUF)",
  IDR: "üáÆüá© (IDR)",
  ILS: "üáÆüá± (ILS)",
  INR: "üáÆüá≥ (INR)",
  IQD: "üáÆüá∂ (IQD)",
  IRR: "üáÆüá∑ (IRR)",
  ISK: "üáÆüá∏ (ISK)",
  JMD: "üáØüá≤ (JMD)",
  JOD: "üáØüá¥ (JOD)",
  JPY: "üáØüáµ (JPY)",
  KES: "üá∞üá™ (KES)",
  KGS: "üá∞üá¨ (KGS)",
  KHR: "üá∞üá≠ (KHR)",
  KMF: "üá∞üá≤ (KMF)",
  KRW: "üá∞üá∑ (KRW)",
  KWD: "üá∞üáº (KWD)",
  KYD: "üá∞üáæ (KYD)",
  KZT: "üá∞üáø (KZT)",
  LAK: "üá±üá¶ (LAK)",
  LBP: "üá±üáß (LBP)",
  LKR: "üá±üá∞ (LKR)",
  LRD: "üá±üá∑ (LRD)",
  LSL: "üá±üá∏ (LSL)",
  LYD: "üá±üáæ (LYD)",
  MAD: "üá≤üá¶ (MAD)",
  MDL: "üá≤üá© (MDL)",
  MGA: "üá≤üá¨ (MGA)",
  MKD: "üá≤üá∞ (MKD)",
  MMK: "üá≤üá≤ (MMK)",
  MNT: "üá≤üá≥ (MNT)",
  MOP: "üá≤üá¥ (MOP)",
  MRU: "üá≤üá∑ (MRU)",
  MUR: "üá≤üá∫ (MUR)",
  MVR: "üá≤üáª (MVR)",
  MWK: "üá≤üáº (MWK)",
  MXN: "üá≤üáΩ (MXN)",
  MYR: "üá≤üáæ (MYR)",
  MZN: "üá≤üáø (MZN)",
  NAD: "üá≥üá¶ (NAD)",
  NGN: "üá≥üá¨ (NGN)",
  NIO: "üá≥üáÆ (NIO)",
  NOK: "üá≥üá¥ (NOK)",
  NPR: "üá≥üáµ (NPR)",
  NZD: "üá≥üáø (NZD)",
  OMR: "üá¥üá≤ (OMR)",
  PAB: "üáµüá¶ (PAB)",
  PEN: "üáµüá™ (PEN)",
  PGK: "üáµüá¨ (PGK)",
  PHP: "üáµüá≠ (PHP)",
  PKR: "üáµüá∞ (PKR)",
  PLN: "üáµüá± (PLN)",
  PYG: "üáµüáæ (PYG)",
  QAR: "üá∂üá¶ (QAR)",
  RON: "üá∑üá¥ (RON)",
  RSD: "üá∑üá∏ (RSD)",
  RUB: "üá∑üá∫ (RUB)",
  RWF: "üá∑üáº (RWF)",
  SAR: "üá∏üá¶ (SAR)",
  SBD: "üá∏üáß (SBD)",
  SCR: "üá∏üá® (SCR)",
  SDG: "üá∏üá© (SDG)",
  SEK: "üá∏üá™ (SEK)",
  SGD: "üá∏üá¨ (SGD)",
  SHP: "üá∏üá≠ (SHP)",
  SLL: "üá∏üá± (SLL)",
  SOS: "üá∏üá¥ (SOS)",
  SRD: "üá∏üá∑ (SRD)",
  SSP: "üá∏üá∏ (SSP)",
  STN: "üá∏üáπ (STN)",
  SVC: "üá∏üáª (SVC)",
  SZL: "üá∏üáø (SZL)",
  THB: "üáπüá≠ (THB)",
  TJS: "üáπüáØ (TJS)",
  TMT: "üáπüá≤ (TMT)",
  TND: "üáπüá≥ (TND)",
  TOP: "üáπüá¥ (TOP)",
  TRY: "üáπüá∑ (TRY)",
  TTD: "üáπüáπ (TTD)",
  TWD: "üáπüáº (TWD)",
  TZS: "üáπüáø (TZS)",
  UAH: "üá∫üá¶ (UAH)",
  UGX: "üá∫üá¨ (UGX)",
  USD: "üá∫üá∏ (USD)",
  UYU: "üá∫üáæ (UYU)",
  UZS: "üá∫üáø (UZS)",
  VES: "üáªüá™ (VES)",
  VND: "üáªüá≥ (VND)",
  VUV: "üáªüá∫ (VUV)",
  WST: "üáºüá∏ (WST)",
  XAF: "üè≥Ô∏è (XAF)",
  XCD: "üá¶üá¨ (XCD)",
  XOF: "üè≥Ô∏è (XOF)",
  XPF: "üè≥Ô∏è (XPF)",
  YER: "üáæüá™ (YER)",
  ZAR: "üáøüá¶ (ZAR)",
  ZMW: "üáøüá≤ (ZMW)",
  ZWL: "üáøüáº (ZWL)"
};

    
    // API base (open, no key)
    const apiBase = 'https://open.er-api.com/v6/latest/';
    let currentRates = {}; // rates from last fetch (base = selected from currency)

    // load currencies (using USD as initial base)
    async function loadCurrencies() {
      try {
        const res = await fetch(apiBase + 'USD');
        const json = await res.json();
        if (json.result !== 'success') throw new Error('API error');
        const rates = json.rates;
        const keys = Object.keys(rates).sort();

        const fromEl = document.getElementById('from');
        const toEl = document.getElementById('to');

        // populate selects
        Object.keys(rates).forEach(code => {
  let display = currencyFlags[code] ? currencyFlags[code] : code;
  fromEl.insertAdjacentHTML('beforeend', `<option value="${code}">${display}</option>`);
  toEl.insertAdjacentHTML('beforeend', `<option value="${code}">${display}</option>`);
});


        fromEl.value = 'USD';
        toEl.value = 'KHR';

        // load initial rates for ticker
        await updateRatesAndTicker();
      } catch (err) {
        document.getElementById('ticker').textContent = '‚ùå Failed to load currencies.';
      }
    }

    // Helper: format numbers with space thousand separator, 2 decimals
    function formatSpace(num) {
      return new Intl.NumberFormat('fr-FR', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(num);
    }

    // update rates (fetch using base = from currency), then update ticker text
    async function updateRatesAndTicker() {
      try {
        const from = document.getElementById('from').value || 'USD';
        const to = document.getElementById('to').value || 'KHR';
        const res = await fetch(apiBase + encodeURIComponent(from));
        const json = await res.json();
        if (json.result !== 'success') throw new Error('API error');
        currentRates = json.rates; // rates relative to base 'from'

        // If target rate exists, show live sentence
        const rate = currentRates[to];
        if (rate) {
          // example: "Live: 1 USD = 4 010.94 KHR" with live dot
          const formatted = formatSpace(rate);
          const tickerText = `Live: 1 ${from} = ${formatted} ${to} `;
          setTickerText(tickerText);
        } else {
          setTickerText('Live rate not available for selected pair.');
        }
      } catch (err) {
        setTickerText('‚ùå Unable to fetch live rate.');
      }
    }

    // set ticker content and restart animation (so text length restarts)
    function setTickerText(text) {
      const ticker = document.getElementById('ticker');
      // include the live-dot HTML at end so the pulse remains
      ticker.innerHTML = text + '<span class="live-dot" id="liveDot"></span>';
      // restart CSS animation by cloning node (simple trick)
      ticker.style.animation = 'none';
      // Force reflow
      void ticker.offsetWidth;
      ticker.style.animation = null;
    }

    // Convert button behavior: uses currentRates (base = from)
    function convertNow() {
      const amount = parseFloat(document.getElementById('amount').value);
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;
      const resultEl = document.getElementById('result');

      if (!amount || amount <= 0) {
        resultEl.textContent = '‚ö†Ô∏è Enter a valid amount';
        return;
      }
      if (!currentRates || typeof currentRates[to] === 'undefined') {
        resultEl.textContent = '‚ùå Rate not available ‚Äî try again in a moment.';
        return;
      }

      const rate = currentRates[to];
      const converted = amount * rate;
      resultEl.textContent = `${amount} ${from} = ${formatSpace(converted)} ${to}`;
    }

    // event listeners
    document.getElementById('convertBtn').addEventListener('click', convertNow);

    // when user changes pair, update rates & ticker immediately
    document.getElementById('from').addEventListener('change', async () => {
      // fetch rates using new base
      await updateRatesAndTicker();
    });
    document.getElementById('to').addEventListener('change', async () => {
      await updateRatesAndTicker();
    });

    // periodic updater: refresh rates & ticker every 10 seconds
    let periodicId = null;
    async function startPeriodic() {
      if (periodicId) clearInterval(periodicId);
      periodicId = setInterval(updateRatesAndTicker, 10000); // 10s
    }

    // initial load
    (async function init(){
      await loadCurrencies();
      startPeriodic();
    })();
  </script>


</body>
</html>
